(this["webpackJsonpreact-ant-admin"]=this["webpackJsonpreact-ant-admin"]||[]).push([[20],{1041:function(e,t,n){},1437:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return N}));n(967);var a=n(968),c=n.n(a),r=(n(943),n(946)),i=n.n(r),s=(n(907),n(911)),o=n.n(s),l=(n(192),n(70)),u=n.n(l),d=(n(191),n(84)),j=n.n(d),b=(n(282),n(107)),O=n.n(b),f=(n(145),n(43)),h=n.n(f),m=n(2),p=(n(936),n(937)),x=n.n(p),g=n(18),v=n(0),y=n(947),w=n(912),I=n(284),S=(n(1041),n(11));function N(){var e=x.a.useForm(),t=Object(g.a)(e,1)[0],n=x.a.useForm(),a=Object(g.a)(n,1)[0],r=Object(v.useState)({page:1}),s=Object(g.a)(r,2),l=s[0],d=s[1],b=Object(v.useState)([]),f=Object(g.a)(b,2),p=f[0],N=f[1],C=Object(v.useState)([]),k=Object(g.a)(C,2),T=k[0],F=k[1],K=Object(v.useState)(!0),A=Object(g.a)(K,2),D=A[0],E=A[1],z=Object(v.useState)(0),P=Object(g.a)(z,2),_=P[0],B=P[1],q=Object(v.useState)(!1),H=Object(g.a)(q,2),J=H[0],R=H[1],V=function(e){Object(I.m)(e).then((function(e){var t=e.data;if(0===e.status){var n=t.list,a=t.total,c=t.mapKey;return c=c.map((function(e){return"description"===e.key&&(e.width=500),e})),F(c),B(a),N(n.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{key:e.m_id})}))),void E(!1)}}))},G=function(e){d({page:1});var t=a.getFieldsValue(),n=Object(m.a)({},t);e||(n=Object(m.a)(Object(m.a)({},n),l)),V(n)},L=Object(S.jsxs)(u.a,{justify:"space-between",align:"center",gutter:80,children:[Object(S.jsx)(O.a,{style:{lineHeight:"32px"},children:"\u8868\u683c\u67e5\u8be2"}),Object(S.jsx)(O.a,{children:Object(S.jsx)(j.a,{type:"primary",onClick:function(){return R(!0)},children:"\u6dfb\u52a0\u6d88\u606f"})})]});return Object(S.jsxs)("div",{className:"search-container",children:[Object(S.jsxs)(i.a,{spinning:D,children:[Object(S.jsx)("div",{className:"top-form",children:Object(S.jsxs)(x.a,{layout:"inline",form:a,children:[Object(S.jsx)(x.a.Item,{name:"name",children:Object(S.jsx)(o.a,{placeholder:"\u8f93\u5165\u6d88\u606f\u540d\u79f0"})}),Object(S.jsx)(x.a.Item,{name:"description",children:Object(S.jsx)(o.a,{placeholder:"\u8f93\u5165\u6d88\u606f\u63cf\u8ff0\u8bcd"})}),Object(S.jsx)(j.a,{onClick:G,type:"primary",className:"submit-btn",children:"\u641c\u7d22"}),Object(S.jsx)(j.a,{onClick:function(){a.resetFields(),G()},children:"\u6e05\u7a7a"})]})}),Object(S.jsx)(w.a,{title:function(){return L},dataSource:p,columns:T,pagination:!1,saveKey:"listForm",rowKey:"m_id"}),Object(S.jsx)(y.a,{page:l.page,immediately:V,change:function(e){var t=a.getFieldsValue();V(Object(m.a)(Object(m.a)({},e),t)),d(e)},total:_})]}),Object(S.jsx)(c.a,{title:"\u6dfb\u52a0\u4e00\u6761\u8bb0\u5f55",visible:J,cancelText:"\u53d6\u6d88",okText:"\u6dfb\u52a0",onOk:function(){t.validateFields().then((function(e){Object(I.b)(e).then((function(e){0===e.status&&(t.resetFields(),h.a.success(e.msg),R(!1),G())}))}))},onCancel:function(){return R(!1)},children:Object(S.jsxs)(x.a,{form:t,children:[Object(S.jsx)(x.a.Item,{label:"\u6d88\u606f\u540d\u79f0",name:"name",rules:[{required:!0,message:"Please input your name!"}],children:Object(S.jsx)(o.a,{})}),Object(S.jsx)(x.a.Item,{label:"\u6d88\u606f\u63cf\u8ff0",name:"description",rules:[{required:!0,message:"Please input your description!"},{min:10,message:"The description must be more than 10 words!"}],children:Object(S.jsx)(o.a,{})})]})})]})}N.route={path:"/list/search"}},912:function(e,t,n){"use strict";n(291);var a=n(152),c=n.n(a),r=(n(191),n(84)),i=n.n(r),s=(n(969),n(971)),o=n.n(s),l=(n(145),n(43)),u=n.n(l),d=(n(581),n(151)),j=n.n(d),b=(n(918),n(919)),O=n.n(b),f=(n(192),n(70)),h=n.n(f),m=(n(915),n(906)),p=n.n(m),x=(n(281),n(120)),g=n.n(x),v=n(25),y=n(18),w=n(2),I=n(0),S=n(979),N=n(146),C=n(970),k=n.n(C),T=n(27),F=(n(913),n(11)),K=["className","style"],A=["columns","dataSource","className","children","saveKey"],D=Object(S.c)((function(){return Object(F.jsx)(N.a,{type:"icon_mirrorlightctrl",className:"drag-sort"})})),E=Object(S.b)((function(e){return Object(F.jsx)("tr",Object(w.a)({},e))})),z=Object(S.a)((function(e){return Object(F.jsx)("tbody",Object(w.a)({},e))})),P=[{title:"\u5217\u6392\u5e8f",dataIndex:"sort",className:"drag-visible",render:function(){return Object(F.jsx)(D,{})}},{title:"\u5217\u540d",dataIndex:"title",className:"drag-visible",align:"center"},{title:"\u5bbd\u5ea6",dataIndex:"width",type:"inputNumber"},{title:"\u56fa\u5b9a",dataIndex:"fixed",width:120,type:"switch",align:"center",range:[{v:!1,t:"\u5173"},{v:"left",t:"\u5de6\u56fa\u5b9a"},{v:"right",t:"\u53f3\u56fa\u5b9a"}]},{title:"\u8d85\u51fa\u5bbd\u5ea6\u9690\u85cf",dataIndex:"ellipsis",type:"switch",align:"center",range:[{v:!1,t:"\u5426"},{v:!0,t:"\u662f"}]},{title:"\u5bf9\u9f50",dataIndex:"align",type:"switch",align:"center",range:[{v:"left",t:"\u5de6"},{v:"center",t:"\u5c45\u4e2d"},{v:"right",t:"\u53f3"}]},{title:"\u9690\u85cf",dataIndex:"hidden",type:"switch",align:"center",range:[{v:"hidden",t:"\u9690\u85cf"},{v:"auto",t:"\u663e\u793a"}]}],_={width:80,fixed:!1,ellipsis:!1,align:"left",hidden:"auto"};t.a=function(e){var t=e.columns,n=e.dataSource,a=e.className,r=e.children,s=e.saveKey,l=Object(v.a)(e,A),d=function(e,t){var n=Object(I.useState)(!1),a=Object(y.a)(n,2),c=a[0],r=a[1],i=Object(I.useState)([]),s=Object(y.a)(i,2),o=s[0],l=s[1],d=Object(I.useState)([]),b=Object(y.a)(d,2),f=b[0],m=b[1];function x(e,t,n){return Object(F.jsx)(g.a.Group,{buttonStyle:"solid",value:t,onChange:function(t){return S(e.dataIndex,t.target.value,n)},children:e.range&&e.range.map((function(e){return Object(F.jsx)(h.a,{className:"mt10",justify:"center",children:Object(F.jsx)(p.a,{title:e.t,arrowPointAtCenter:!0,children:Object(F.jsx)(g.a,{value:e.v,children:e.t})})},e.t)}))})}function S(e,t,n){var a=n.dataIndex,c=o.map((function(n){return n.dataIndex===a&&(n[e]=t),n}));l(c)}function N(e,t,n){return Object(F.jsx)(p.a,{title:"\u5931\u53bb\u7126\u70b9\u89e6\u53d1",arrowPointAtCenter:!0,children:Object(F.jsx)(O.a,{min:0,max:800,onStep:function(t){return S(e,t,n)},onBlur:function(t){return S(e,Number(t.target.value),n)},value:t})})}function C(e){var t=e.oldIndex,n=e.newIndex;if(t!==n){var a=k()([].concat(o),t,n).filter((function(e){return!!e}));l(a)}}function A(){var t=e.map((function(e,t){return Object(w.a)(Object(w.a)(Object(w.a)({},_),e),{},{index:t})}));l(t)}return Object(I.useEffect)((function(){var n=Object(T.g)(!0,t);if(t&&n&&e&&e.length===n.length){var a={},c={};if(e.forEach((function(e){return a[e.dataIndex]=e})),n.forEach((function(e){return c[e.dataIndex]=e})),Array.isArray(n)&&n.every((function(e){var t;return e.dataIndex===(null===(t=a[e.dataIndex])||void 0===t?void 0:t.dataIndex)}))){var r=n.map((function(e){return Object(w.a)(Object(w.a)(Object(w.a)({},_),a[e.dataIndex]),e)}));l(r)}else A()}else!n&&e&&e.length!==o.length&&A()}),[t,e]),Object(I.useEffect)((function(){if(0!==o.length){var e=P.map((function(e){return"switch"===e.type&&(e.render=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return x.apply(void 0,[e].concat(n))}),"inputNumber"===e.type&&(e.render=function(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return N.apply(void 0,[e.dataIndex].concat(n))}),e}));m(e)}}),[o]),{col:o,showDrawer:c,show:function(){r(!0)},hiddin:function(){r(!1)},tbTitle:f,delTbSet:function(){if(!t)return j.a.error({type:"error",description:"\u4f60\u672a\u5b9a\u4e49\u8868\u683c\u7684savaKey\u5c5e\u6027\uff0c\u8bf7\u5b9a\u4e49\u540e\u5728\u70b9\u51fb\u5220\u9664",message:"\u5220\u9664\u5931\u8d25"});Object(T.o)(!0,t),A(),u.a.success("\u5220\u9664\u6210\u529f!")},DraggableContainer:function(e){return Object(F.jsx)(z,Object(w.a)({useDragHandle:!0,disableAutoscroll:!0,helperClass:"row-dragging",onSortEnd:C},e))},DraggableBodyRow:function(e){e.className,e.style;var t=Object(v.a)(e,K),n=o.findIndex((function(e){return e.index===t["data-row-key"]}));return Object(F.jsx)(E,Object(w.a)({index:n},t))},saveTbSet:function(){if(!t)return j.a.error({type:"error",description:"\u4f60\u672a\u5b9a\u4e49\u8868\u683c\u7684savaKey\u5c5e\u6027\uff0c\u8bf7\u5b9a\u4e49\u540e\u4fdd\u5b58",message:"\u4fdd\u5b58\u5931\u8d25"});Object(T.t)(!0,t,o),u.a.success("\u4fdd\u5b58\u8bbe\u7f6e\u6210\u529f!")}}}(t,s),b=d.showDrawer,f=d.show,m=d.hiddin,x=d.col,S=d.tbTitle,C=d.delTbSet,D=d.DraggableContainer,B=d.DraggableBodyRow,q=d.saveTbSet;return Object(F.jsxs)("div",{className:"react-ant-table",children:[Object(F.jsx)(h.a,{className:"set",justify:"end",children:Object(F.jsx)(N.a,{type:"icon_edit",onClick:f})}),Object(F.jsx)(o.a,Object(w.a)(Object(w.a)({columns:x.filter((function(e){return"hidden"!==e.hidden})),dataSource:n,className:a?"table-show-container ".concat(a):"table-show-container"},l),{},{children:r})),Object(F.jsxs)(c.a,{className:"table-drawer",width:1e3,onClose:m,maskClosable:!0,visible:b,title:"\u8868\u683c\u663e\u793a\u8bbe\u7f6e",children:[Object(F.jsx)(o.a,{columns:S,dataSource:x,rowKey:"index",components:{body:{wrapper:D,row:B}},pagination:!1}),Object(F.jsxs)(h.a,{justify:"center",className:"mt20",children:[Object(F.jsx)(i.a,{type:"primary",onClick:q,children:"\u4fdd\u5b58\u6b64\u8868\u683c\u8bbe\u7f6e\uff0c\u4e0b\u6b21\u6253\u5f00\u9ed8\u8ba4\u542f\u7528"}),Object(F.jsx)(i.a,{danger:!0,type:"ghost",className:"del",onClick:C,children:"\u5220\u9664\u5df2\u4fdd\u5b58\u7684\u8bbe\u7f6e"})]})]})]})}},913:function(e,t,n){},947:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));n(192);var a=n(70),c=n.n(a),r=(n(964),n(965)),i=n.n(r),s=n(18),o=n(0),l=(n(948),n(11)),u=[10,20,50,100];function d(e){var t=e.total,n=e.page,a=void 0===n?1:n,r=e.change,d=e.immediately,j=Object(o.useState)(u[0]),b=Object(s.a)(j,2),O=b[0],f=b[1];Object(o.useEffect)((function(){"function"===typeof d&&d({page:a,pagesize:O})}),[]);return Object(l.jsx)(c.a,{justify:"end",className:"pagination-wapper",children:Object(l.jsx)(i.a,{showSizeChanger:!0,onChange:function(e,t){f(t),"function"===typeof r&&r({page:e,pagesize:t})},current:a,total:t,pageSizeOptions:u})})}},948:function(e,t,n){}}]);